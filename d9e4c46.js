(window.webpackJsonp=window.webpackJsonp||[]).push([[132],{614:function(e){e.exports=JSON.parse('{"content":"<p>博客添加了<code>disqus</code>，并且在文章列表处每一篇标题边上添加一个评论计数器。</p>\\n<p>它通过<code>identifier</code>去获取，<code>identifier</code>在文章详情页面提供配置。</p>\\n<p>问题是：<strong>这个计数器并不是每一篇文章都能正确显示</strong>，有的列表能显示2个，有的列表一个都不显示，</p>\\n<p><img src=\\"/article/img/comment_count_fail.png\\" alt=\\"\\"></p>\\n<p>看了看network，不能显示的文章response是个空数组，是不是服务器获取失败呢还是没有上传到服务器呢。</p>\\n<p>第一次尝试，将计数器获取的配置<code>identifier</code>改成一个静态的并且有效的(已经能获取到的)，\\n结果能显示，说明获取计数值这个调用(或者说这个写法)是没有问题的。</p>\\n<p>第二次尝试，将配置<code>identifier</code>改回动态。在<code>https://disqus.com/api/console/</code>进行调试</p>\\n<p>选择<code>thread</code>下方的<code>list</code>，设定<code>froum</code>为你的<code>shortname</code>，\\n如果你的数量超过25，需要设置<code>limit</code>，我这里设置了<code>limit</code>为100</p>\\n<p><img src=\\"/article/img/disqus_concole.png\\" alt=\\"\\"></p>\\n<p>将结果copy到控制台上一看，才47条，我这里文章起码90篇，找到原因了，原来是服务器并未接收到许多文章的<code>identifier</code></p>\\n<p><img src=\\"/article/img/disque_request_first.png\\" alt=\\"\\"></p>\\n<p>那么发生这种问题的原因和问题该如何解决呢？</p>\\n<p>原因应该是，</p>\\n<ol>\\n<li><p>具体的<code>identifier</code>配置卸载模块内部，如果不去加载模块，那么它变无法执行。</p>\\n</li>\\n<li><p>我的文章都是<code>lazy-load</code>或许也有造成这种问题的因素。</p>\\n</li>\\n</ol>\\n<p>那么解决方法，我也是用一个笨方法，写了一个<code>setInterval</code>，每个几秒让它跳转下一篇文章，全部让它配置一次，\\n大约5分钟后，再次<code>request</code>后</p>\\n<p>数量已经达到正常的98</p>\\n<p><img src=\\"/article/img/disque_request_second.png\\" alt=\\"\\"></p>\\n<p>过了几分钟，强制刷新后，再次查看，全部正常显示！</p>\\n<p><img src=\\"/article/img/comment_count_succ.png\\" alt=\\"\\"></p>\\n","toc":[],"relatedTags":null,"created_at":"2018-10-27","timeArr":[2018,9,27,0,0,0,0],"title":"解决disqus无法正确显示每一个comment count","uuid":"7a618f35d69b48cbdbef3e7285fffc03098e720a","summary":"<p>博客添加了<code>disqus</code>，并且在文章列表处每一篇标题边上添加一个评论计数器。</p>\\n<p>它通过<code>identifier</code>去获取，<code>identifier</code>在文章详情页面提供配置。</p>\\n<p>问题是：<strong>这个计数器并不是每一篇文章都能正确显示</strong>，有的列表能显示2个，有的列表一个都不显示，</p>\\n<p>![](/article/img/commen...</p>","slug":"jie-jue-disqus-wu-fa-zheng-que-xian-shi-mei-yi-ge-comment-count","sha":"901e43a8e9f1c5cf70956f7fb9139ccb541370fd"}')}}]);