(window.webpackJsonp=window.webpackJsonp||[]).push([[145],{627:function(e){e.exports=JSON.parse('{"content":"<h4 id=\\"diff-suan-fa-3-ge-ce-lve\\">Diff算法3个策略</h4>\\n<ol>\\n<li>跨层级不进行不比较</li>\\n<li>不同类不进行比较</li>\\n<li>同类同级通过key比较</li>\\n</ol>\\n<p>主要对第三种进行解释</p>\\n<h2 id=\\"li-zi\\">例子</h2>\\n<p>更新前组件：<code>A-B-C-D</code> =&gt; 更新后组件：<code>C-B-E-A</code></p>\\n<p>满足<code>child._mountIndex &lt; lastIndex</code>才会进行组件移动</p>\\n<ul>\\n<li><p><code>child._mountIndex</code>其实是当前的index，但此时正在比较，还未变动，也就是更新前的index</p>\\n</li>\\n<li><p><code>lastIndex</code>是一个不断更新的值，每一个组件比较后，lastIndex为<code>Math.max(prevChild.mountIndex,lastIndex)</code></p>\\n</li>\\n</ul>\\n<p>遍历新集合：</p>\\n<p>比较C：<code>child._mountIndex</code>为2，<code>lastIndex</code>为0,不满足，不执行变动，更新<code>lastIndex</code>为2；</p>\\n<p>比较B：<code>child._mountIndex</code>为1，<code>lastIndex</code>为2，满足，执行移动，更新<code>lastIndex</code>为2；</p>\\n<p>比较E：旧集合未找到，执行添加，<code>lastIndex</code>为2；</p>\\n<p>比较A：<code>child._mountIndex</code>为0，<code>lastIndex</code>为2，满足，执行移动，更新<code>lastIndex</code>为2；</p>\\n<p>遍历旧集合，发现D，执行删除</p>\\n<h2 id=\\"que-dian\\">缺点</h2>\\n<p>从上面例子可以发现，diff算法主要通过不断更新<code>lastIndex</code>进行判断，因此，\\n如果<code>lastIndex</code>一开始就更新成最后一个index，那么后面的所有组件都要进行变动。</p>\\n<p>例如：</p>\\n<p>更新前组件：<code>A-B-C-D</code> =&gt; 更新后组件：<code>D-A-B-C</code></p>\\n<p>一开始比较D：<code>child._mountIndex</code>为3，<code>lastIndex</code>为0,不满足，不执行变动，更新<code>lastIndex</code>为3；</p>\\n<p>此时<code>lastIndex</code>已经为最大值，后面所有比较都会满足<code>child._mountIndex &lt; lastIndex</code></p>\\n<p>更新变动为：</p>\\n<p>D组件不变</p>\\n<p>A,B,C组件都要移动</p>\\n","toc":[{"anchor":"diff-suan-fa-3-ge-ce-lve","level":4,"text":"Diff算法3个策略"},{"anchor":"li-zi","level":2,"text":"例子"},{"anchor":"que-dian","level":2,"text":"缺点"}],"relatedTags":null,"created_at":"2018-06-21","timeArr":[2018,5,21,0,0,0,0],"title":"react-diff","uuid":"a7eefe5d3d4ed07619a790048edf4b9617f40957","summary":"<h4>Diff算法3个策略</h4>\\n<ol>\\n<li>跨层级不进行不比较</li>\\n<li>不同类不进行比较</li>\\n<li>同类同级通过key比较</li>\\n</ol>\\n<p>主要对第三种进行解释</p>\\n<h4>例子</h4>\\n<p>更新前组件：<code>A-B-C-D</code> =&gt; 更新后组件：<code>C-B-E-A</code></p>\\n<p>满足<code>child._mountIndex &lt; lastIndex</code>才会进行组件移动</p>\\n<ul>\\n<li>`...</li>\\n</ul>","slug":"react-diff","sha":"815f451f91044acdeba648889b432803b50a1130"}')}}]);