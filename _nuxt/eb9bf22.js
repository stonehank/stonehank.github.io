(window.webpackJsonp=window.webpackJsonp||[]).push([[94],{576:function(n){n.exports=JSON.parse('{"content":"<p>canvas做大量重复的粒子运动，例如雪花，星光闪烁</p>\\n<p>并不需要针对每一个粒子进行动画，例如</p>\\n<pre><code class=\\"language-js\\"><pre class=\\"hljs\\"><code><span class=\\"hljs-keyword\\">for</span>(<span class=\\"hljs-keyword\\">let</span> i=<span class=\\"hljs-number\\">0</span>;i&lt;particles,length;i++){\\n  <span class=\\"hljs-keyword\\">let</span> p=particles[i]\\n  ctx.beginPath()\\n  ctx.fillStyle=<span class=\\"hljs-function\\"><span class=\\"hljs-keyword\\">function</span>(<span class=\\"hljs-params\\"></span>)</span>{}\\n  ctx.fillRect(p.x, p.y, w, h);\\n}</code></pre></code></pre>\\n<p>只需要针对重复运动做出2-3个画板，将所有的粒子平均填充到画板上，再移动画板便可,</p>\\n<pre><code class=\\"language-js\\"><pre class=\\"hljs\\"><code><span class=\\"hljs-comment\\">// 创建画板</span>\\n<span class=\\"hljs-keyword\\">let</span> panels=[]\\n    <span class=\\"hljs-keyword\\">for</span>(<span class=\\"hljs-keyword\\">let</span> i=<span class=\\"hljs-number\\">0</span>;i&lt;num;i++) {\\n    <span class=\\"hljs-keyword\\">let</span> c = <span class=\\"hljs-built_in\\">document</span>.createElement(<span class=\\"hljs-string\\">\'canvas\'</span>);\\n    c.width =canvasW\\n    c.height = canvasH;\\n    panels.push({\\n      <span class=\\"hljs-attr\\">canvas</span>: c,\\n      <span class=\\"hljs-attr\\">ctx</span>: c.getContext(<span class=\\"hljs-string\\">\'2d\'</span>),\\n      <span class=\\"hljs-attr\\">x</span>:<span class=\\"hljs-number\\">0</span>,\\n      <span class=\\"hljs-attr\\">y</span>:<span class=\\"hljs-number\\">0</span>,\\n      <span class=\\"hljs-attr\\">vx</span>:<span class=\\"hljs-number\\">0</span>,\\n      <span class=\\"hljs-attr\\">vy</span>:<span class=\\"hljs-number\\">0</span>\\n    })\\n}\\n<span class=\\"hljs-comment\\">// 填充</span>\\n<span class=\\"hljs-keyword\\">for</span>(<span class=\\"hljs-keyword\\">let</span> i=<span class=\\"hljs-number\\">0</span>;i&lt;particles,length;i++){\\n  <span class=\\"hljs-keyword\\">let</span> p=particles[i]\\n  <span class=\\"hljs-keyword\\">let</span> cur=<span class=\\"hljs-built_in\\">Math</span>.floor(<span class=\\"hljs-built_in\\">Math</span>.random()*(panels.length<span class=\\"hljs-number\\">-0.01</span>))\\n  <span class=\\"hljs-keyword\\">let</span> cctx=panels[cur].ctx\\n  cctx.beginPath()\\n  cctx.fillStyle=<span class=\\"hljs-function\\"><span class=\\"hljs-keyword\\">function</span>(<span class=\\"hljs-params\\"></span>)</span>{}\\n  cctx.fillRect(p.x, p.y, w, h);\\n}\\n\\n<span class=\\"hljs-comment\\">// 画板移动</span>\\n raf(<span class=\\"hljs-function\\"><span class=\\"hljs-keyword\\">function</span> <span class=\\"hljs-title\\">playing</span>(<span class=\\"hljs-params\\"></span>)</span>{\\n    ctx.clearRect(<span class=\\"hljs-number\\">0</span>,<span class=\\"hljs-number\\">0</span>,canvasW,canvasH)\\n    <span class=\\"hljs-keyword\\">for</span>(<span class=\\"hljs-keyword\\">let</span> i=<span class=\\"hljs-number\\">0</span>;i&lt;panels.length;i++){\\n      panels[i].vx=(<span class=\\"hljs-number\\">0</span>-panels[i].x)*<span class=\\"hljs-number\\">0.1</span>\\n      panels[i].vy=(<span class=\\"hljs-number\\">0</span>-panels[i].y)*<span class=\\"hljs-number\\">0.1</span>\\n      panels[i].x+=panels[i].vx\\n      panels[i].y+=panels[i].vy\\n      <span class=\\"hljs-keyword\\">if</span>(<span class=\\"hljs-built_in\\">Math</span>.abs(panels[i].y<span class=\\"hljs-number\\">-0</span>)&lt;<span class=\\"hljs-number\\">1</span>)panels[i].y=<span class=\\"hljs-number\\">0</span>\\n      <span class=\\"hljs-keyword\\">if</span>(<span class=\\"hljs-built_in\\">Math</span>.abs(panels[i].x<span class=\\"hljs-number\\">-0</span>)&lt;<span class=\\"hljs-number\\">1</span>)panels[i].x=<span class=\\"hljs-number\\">0</span>\\n      ctx.drawImage(panels[i].canvas,panels[i].x,panels[i].y)\\n    }\\n    raf(playing)\\n  })</code></pre></code></pre>\\n","toc":[],"relatedTags":null,"created_at":"2018-08-20","timeArr":[2018,7,20,0,0,0,0],"title":"canvas处理大量重复运动","uuid":"7d330d0cc2eaff951ab1a45bc216f483c483f6e0","summary":"<p>canvas做大量重复的粒子运动，例如雪花，星光闪烁</p>\\n<p>并不需要针对每一个粒子进行动画，例如</p>\\n<pre class=\\"hljs\\"><code><span class=\\"hljs-keyword\\">for</span>(<span class=\\"hljs-keyword\\">let</span> i=<span class=\\"hljs-number\\">0</span>;i&lt;particles,length;i++){\\n  <span class=\\"hljs-keyword\\">let</span> p=particles[i]\\n  ctx.beginPath()\\n  ctx.fillStyle=<span class=\\"hljs-function\\"><span class=\\"hljs-keyword\\">function</span>(<span class=\\"hljs-params\\"></span>)</span>{}\\n  ...</code></pre>","slug":"canvas-chu-li-da-liang-chong-fu-yun-dong","sha":"e43ef69f83c35b3fbffbb984a2b1c56c4c7db591"}')}}]);